<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>sprMovingPlatform</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>1</depth>
  <persistent>0</persistent>
  <parentName>objPlatform</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>event_inherited();

bounce = true;  //set the platform to bounce against walls
if(scrCheckRoom() == 1){
    sprite_index = sprZeroyumePlatform;
    visible = true;

}
else if(scrCheckRoom() == 3){
    sprite_index = sprRongPlatform;
    visible = true;
}
else if(scrCheckRoom() == 4){
    sprite_index = sprWJPlatform;
    visible = true;
}
else {
    sprite_index = sprMovingPlatform;
    //visible = false;
}

v=0
h=0
spd=0
dir=0

sent = false
alarm[0]=1
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>isTouchPlatform = v != 0 || h != 0 || spd != 0
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if (speed != 0 || yspeed != 0)  //make sure the platform is moving before doing collision checks
{
    if (bounce)
    {
        if (!place_free(x+hspeed,y)) {hspeed = -hspeed;}
        
        if (!place_free(x,y+vspeed+yspeed)) 
        {
            if (vspeed != 0) 
            {
                yspeed = -vspeed;
                vspeed = 0;
            }
            else 
            {
                vspeed = -yspeed;
                yspeed = 0;
            }
        }
    }
    
    with (instance_place(x,y-(2*global.grav),objPlayer))
    {
        y += other.vspeed + other.yspeed;
        if (place_free(x+other.hspeed,y)) x += other.hspeed;
    }
    
    y += yspeed;
    
    if (vspeed &lt; 0)
    {
        yspeed = vspeed;
        vspeed = 0;
    }
    if (yspeed &gt; 0) 
    {
        vspeed = yspeed;
        yspeed = 0;
    }
}

isPlayerOnPlatform =
    collision_rectangle(
        bbox_left - 2,
        bbox_top - 2,
        bbox_right + 2,
        bbox_bottom + 2,
        objPlayer,
        0,
        1
    ) != noone &amp;&amp;
    (objPlayer.onPlatform || keyboard_check_pressed(vk_shift))

if (isPlayerOnPlatform &amp;&amp; isTouchPlatform &amp;&amp; !sent) {
    /*
    if (spd != 0) {
        hspeed = lengthdir_x(spd, dir)
        vspeed = lengthdir_y(spd, dir)
    } else {
        hspeed = h
        vspeed = v
    }
    */
    hspeed = h
    vspeed = v
    sent = true
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
